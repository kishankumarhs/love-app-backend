#!/bin/bash\n\n# Love App Backend Deployment Script\n\nset -e\n\necho \"ğŸš€ Starting Love App Backend Deployment...\"\n\n# Load environment variables\nif [ -f .env.production ]; then\n    export $(cat .env.production | xargs)\nfi\n\n# Build and push Docker image\necho \"ğŸ“¦ Building Docker image...\"\ndocker build -t loveapp-backend:latest .\n\n# Tag for registry (if using)\nif [ ! -z \"$DOCKER_REGISTRY\" ]; then\n    docker tag loveapp-backend:latest $DOCKER_REGISTRY/loveapp-backend:latest\n    echo \"ğŸ“¤ Pushing to registry...\"\n    docker push $DOCKER_REGISTRY/loveapp-backend:latest\nfi\n\n# Run database migrations\necho \"ğŸ—„ï¸ Running database migrations...\"\ndocker-compose exec -T db psql -U postgres -d loveapp -f /docker-entrypoint-initdb.d/run-migrations.sh\n\n# Deploy with Docker Compose\necho \"ğŸ”„ Deploying services...\"\ndocker-compose down\ndocker-compose up -d\n\n# Wait for services to be ready\necho \"â³ Waiting for services to start...\"\nsleep 30\n\n# Health check\necho \"ğŸ¥ Running health checks...\"\nif curl -f http://localhost:3000/health; then\n    echo \"âœ… Deployment successful!\"\n    echo \"ğŸ“Š API Documentation: http://localhost:3000/api\"\n    echo \"ğŸ¥ Health Check: http://localhost:3000/health\"\nelse\n    echo \"âŒ Deployment failed - health check failed\"\n    docker-compose logs app\n    exit 1\nfi\n\necho \"ğŸ‰ Love App Backend deployed successfully!\"\n